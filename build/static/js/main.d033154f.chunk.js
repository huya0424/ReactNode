(window.webpackJsonpcnodejs=window.webpackJsonpcnodejs||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/cnodejs.e2b40b75.svg"},127:function(e,t,a){e.exports=a(228)},132:function(e,t,a){},181:function(e,t,a){},185:function(e,t,a){},203:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){e.exports=a.p+"static/media/thumbs-up.b296ff53.svg"},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),o=a(10),i=a(31),m=a(18),s=a(231),u=a(11),E=a(109),p=a.n(E);a(132);var f=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],l=t[1],c=function(){l(!1)};return r.a.createElement("div",{className:"header"},r.a.createElement("div",null,r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:p.a,alt:"logo"})),r.a.createElement("a",{href:"javscript:void(0);",className:"about",onClick:function(){l(!0)}},"\u5173\u4e8e")),r.a.createElement(s.a,{title:"\u5173\u4e8e\u672c\u9879\u76ee",visible:a,onOk:c,onCancel:c},r.a.createElement("p",null,"\u4f5c\u8005\uff1a",r.a.createElement("a",{href:"javscript:void(0);",rel:"nofollow noopener noreferrer"},"\u80e1\u5927\u5934")),r.a.createElement("p",null,"\u6e90\u7801\uff1a",r.a.createElement(u.a,{type:"star",theme:"twoTone",twoToneColor:"#eb2f96"}),r.a.createElement("a",{href:"https://github.com/huya123/ReactNode",target:"_blank",rel:"nofollow noopener noreferrer"},"ReactCnodeJS"),r.a.createElement(u.a,{type:"star",theme:"twoTone",twoToneColor:"#eb2f96"}),"\xa0\u6b22\u8fceStar~\xa0",r.a.createElement(u.a,{type:"star",theme:"twoTone",twoToneColor:"#eb2f96"})),r.a.createElement("div",null,r.a.createElement("p",null,"\u6280\u672f\u6808\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,"React"),r.a.createElement("li",null,"React Hooks"),r.a.createElement("li",null,"React Router"),r.a.createElement("li",null,"Ant Design"),r.a.createElement("li",null,"Axios")))))},d=(a(181),a(120)),v=(a(182),a(230)),b=a(78),h=(a(185),a(79)),g=a.n(h),y=a(121),O=a(47),j=a.n(O);j.a.defaults.timeout=1e4,j.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),j.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var w=function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get((n=t.url,"https://cnodejs.org/api/v1/".concat(n)),{params:t.params});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}(),N=a(232),k=a(233),_=a(12),Y=a.n(_),T={good:{name:"\u7cbe\u534e",color:"magenta"},job:{name:"\u62db\u8058",color:"blue"},ask:{name:"\u95ee\u7b54",color:"geekblue"},share:{name:"\u5206\u4eab",color:"green"}};a(203);var D=function(e){var t=e.list.list;return 0===t.length?r.a.createElement(N.a,{active:!0}):t.map((function(e){return r.a.createElement("div",{className:"topics",key:e.id},r.a.createElement(o.b,{to:"/user/"+e.author.loginname},r.a.createElement("img",{src:e.author.avatar_url,alt:"\u7528\u6237\u5934\u50cf"})),r.a.createElement("span",{className:"count"},r.a.createElement("em",null,e.reply_count),"/",r.a.createElement("em",null,e.visit_count)),r.a.createElement(k.a,{color:T[e.tab]&&T[e.tab].color},T[e.tab]&&T[e.tab].name),r.a.createElement(o.b,{className:"title",to:"/topics/"+e.id},e.title),r.a.createElement("span",{className:"time"},Y()(e.last_reply_at,"YYYY-MM-DD").startOf("day").fromNow()))}))};function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M=v.a.TabPane,C=function(e,t){return r.a.createElement(b.Sticky,{bottomOffset:80},(function(a){var n=a.style;return r.a.createElement(t,Object.assign({},e,{style:x({},n,{zIndex:1,background:"#fff"})}))}))};var S=function(){var e=function(){var e=Object(n.useState)({page:1,limit:20,list:[],store:{},tab:"all"}),t=Object(m.a)(e,2),a=t[0],r=t[1],l=Object(n.useCallback)((function(){var e=document.body.scrollHeight||document.documentElement.scrollHeight;document.documentElement.clientHeight+(document.body.scrollTop||document.documentElement.scrollTop)>=e&&c()}),[a.list]);Object(n.useEffect)((function(){c()}),[]),Object(n.useEffect)((function(){return window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",l)}}),[a.list]);var c=function(){var e={page:a.page,limit:a.limit,tab:a.tab};w({url:"topics",params:e}).then((function(e){var t=a.store;r((function(t){return x({},t,{limit:t.limit+10,list:e.data})})),t[a.tab]={limit:a.limit,list:e.data}}))};return{param:a,setParam:r,getTopics:c}}(),t=e.param,a=e.setParam,l=e.getTopics;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"home"},r.a.createElement(b.StickyContainer,null,r.a.createElement(v.a,{defaultActiveKey:"all",renderTabBar:C,onChange:function(e){var n=t.store;if(!t.store[e])return t.limit=20,t.list=[],t.tab=e,void l();a((function(t){return x({},t,{tab:e,limit:n[e].limit+10,list:n[e].list})}))}},r.a.createElement(M,{tab:"\u5168\u90e8",key:"all"},r.a.createElement(D,{list:t})),r.a.createElement(M,{tab:"\u7cbe\u534e",key:"good"},r.a.createElement(D,{list:t})),r.a.createElement(M,{tab:"\u5206\u4eab",key:"share"},r.a.createElement(D,{list:t})),r.a.createElement(M,{tab:"\u95ee\u7b54",key:"ask"},r.a.createElement(D,{list:t})),r.a.createElement(M,{tab:"\u5de5\u4f5c",key:"job"},r.a.createElement(D,{list:t}))))))},H=a(229),R=Object(n.createContext)({}),I="UPDATE_TOPIC",L=function(e,t){switch(t.type){case I:return t.otherTopic;default:return e}},A=function(e){var t=Object(n.useReducer)(L,r.a.createElement("div",null)),a=Object(m.a)(t,2),l=a[0],c=a[1];return r.a.createElement(R.Provider,{value:{otherTopic:l,dispatch:c}},e.children)};a(214);var B=function(e){var t=e.replies,n=t.map((function(e,t){return r.a.createElement("div",{key:e.id},r.a.createElement(o.b,{to:"/user/"+e.author.loginname},r.a.createElement("img",{src:e.author&&e.author.avatar_url,alt:"\u5934\u50cf"})),r.a.createElement("div",null,r.a.createElement("div",{className:"info"},r.a.createElement("p",null,r.a.createElement("span",null,t+1,"\u697c\xa0"),r.a.createElement(o.b,{to:"/user/"+e.author.loginname},e.author.loginname," \xa0"),r.a.createElement("span",null,Y()(e.create_at,"YYYY-MM-DD").startOf("day").fromNow())),(n=e.ups.length)?r.a.createElement("span",{className:"thumbs"},r.a.createElement("img",{src:a(215),alt:"\u70b9\u8d5e"}),n):r.a.createElement("span",null)),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.content}})));var n}));return n.splice(0,0,r.a.createElement("div",{key:1}," ",r.a.createElement("span",null,t.length),"\xa0 \u56de\u590d ")),r.a.createElement("div",{className:"reply"},n)};a(216);var J=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),l=a[0],c=a[1],i=e.loginname,s=Object(n.useContext)(R).dispatch;return Object(n.useEffect)((function(){w({url:"user/".concat(i)}).then((function(e){c(e.data),s({type:I,otherTopic:e.data})}))}),[]),l.loginname?r.a.createElement("div",{className:"profile-panel"},r.a.createElement(o.b,{className:"user",to:"/user/"+l.loginname},r.a.createElement("img",{src:l.avatar_url,alt:"\u5934\u50cf"}),l.loginname),r.a.createElement("p",null," \u79ef\u5206\uff1a",l.score," "),r.a.createElement("p",null,"Github\uff1a",r.a.createElement("a",{href:"https://github.com/"+l.githubUsername,target:"_blank",rel:"nofollow noopener noreferrer"},l.githubUsername)),r.a.createElement("p",null,"\u6ce8\u518c\u65f6\u95f4\uff1a",Y()(l.create_at,"YYYY-MM-DD").startOf("day").fromNow())):r.a.createElement(N.a,{active:!0})};a(217);function U(e){var t=Object(n.useContext)(R).otherTopic;if(!t.loginname)return r.a.createElement("div",null);var a=t.recent_topics.map((function(t,a){var n=r.a.createElement("div",{key:t.id},r.a.createElement(o.b,{key:t.id,to:"/topics/"+t.id}," ",t.title," "));return e.simple||(n=r.a.createElement("div",{key:t.id},r.a.createElement(o.b,{to:"/user/"+t.author.loginname},r.a.createElement("img",{src:t.author.avatar_url,alt:"\u5934\u50cf"})),r.a.createElement(o.b,{to:"/topics/"+t.id}," ",t.title," "),r.a.createElement("span",{className:"time"},Y()(t.last_reply_at,"YYYY-MM-DD").startOf("day").fromNow()),r.a.createElement(H.a,{className:"inside-divider"}))),n}));return r.a.createElement("div",{className:"other-panel"},r.a.createElement("header",null,"\u6700\u8fd1\u521b\u5efa\u7684\u8bdd\u9898"),r.a.createElement(H.a,{className:"divider"}),a)}U.defaultProps={simple:!0};var z=U;a(218);function W(e){var t=Object(n.useContext)(R).otherTopic;if(!t.loginname)return r.a.createElement("div",null);var a=t.recent_replies.map((function(t,a){var n=r.a.createElement("div",{key:t.id},r.a.createElement(o.b,{key:t.id,to:"/topics/"+t.id},t.title));return e.simple||(n=r.a.createElement("div",{key:t.id},r.a.createElement(o.b,{to:"/user/"+t.author.loginname},r.a.createElement("img",{src:t.author.avatar_url,alt:"\u5934\u50cf"})),r.a.createElement(o.b,{to:"/topics/"+t.id},t.title),r.a.createElement("span",{className:"time"},Y()(t.last_reply_at,"YYYY-MM-DD").startOf("day").fromNow()),r.a.createElement(H.a,{className:"inside-divider"}))),n}));return r.a.createElement("div",{className:"recent-reply"},r.a.createElement("header",null,"\u6700\u8fd1\u53c2\u4e0e\u7684\u8bdd\u9898"),r.a.createElement(H.a,{className:"divider"}),a)}W.defaultProps={simple:!0};var q=W;a(219),a(220);var F=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),l=a[0],c=a[1],i=e.match.params.id;return Object(n.useEffect)((function(){return w({url:"topic/".concat(i)}).then((function(e){c(e.data)})),function(){console.log("\u79bb\u5f00")}}),[i]),l.id?r.a.createElement("div",{className:"topic"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"title",dangerouslySetInnerHTML:{__html:l.title}}),r.a.createElement("div",{className:"info"},r.a.createElement("span",null,"\u53d1\u5e03\u4e8e\xa0",Y()(l.create_at,"YYYY-MM-DD").startOf("day").fromNow(),"\xa0\u2022\xa0"),"\u4f5c\u8005\uff1a",r.a.createElement(o.b,{to:"/user/"+l.author.loginname},l.author.loginname),"\xa0\u2022\xa0",r.a.createElement("span",null,l.visit_count,"\u6b21\u6d4f\u89c8"),"\xa0\u2022\xa0",r.a.createElement("span",null,"\u6765\u81ea\uff1a",T[l.tab]&&T[l.tab].name)),r.a.createElement(H.a,null),r.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:l.content}}),r.a.createElement(B,{replies:l.replies})),r.a.createElement("div",{className:"right"},r.a.createElement(A,null,r.a.createElement(J,{loginname:l.author.loginname}),r.a.createElement(z,null),r.a.createElement(q,null)))):r.a.createElement(N.a,{active:!0})};a(221);var G=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),l=a[0],c=a[1],o=e.match.params.id;return console.log("user-id="+o),Object(n.useEffect)((function(){return w({url:"user/".concat(o)}).then((function(e){console.log(e),c(e.data)})),function(){console.log("\u79bb\u5f00")}}),[o]),l.loginname?r.a.createElement("div",{className:"profile"},r.a.createElement(A,null,r.a.createElement(J,{loginname:l.loginname}),r.a.createElement(z,{simple:!1}),r.a.createElement(q,{simple:!1}))):r.a.createElement(N.a,{active:!0})};var K=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement(o.a,null,r.a.createElement("div",{className:"box"},r.a.createElement(i.b,{exact:!0,path:"/",component:S}),r.a.createElement(i.b,{path:"/topics/:id",component:F}),r.a.createElement(i.b,{path:"/user/:id",component:G}),r.a.createElement(i.b,{exact:!0,path:"/topics",render:function(){return r.a.createElement(i.a,{to:"/"})}}),r.a.createElement(i.b,{exact:!0,path:"/user",render:function(){return r.a.createElement(i.a,{to:"/"})}}))))},$=(a(222),a(13)),Q=a(125),V=a.n(Q);a(223),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Y.a.locale("zh-cn"),c.a.render(r.a.createElement($.b,{locale:V.a},r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[127,1,2]]]);
//# sourceMappingURL=main.d033154f.chunk.js.map